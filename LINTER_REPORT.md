# Effect Patterns Linter Report

**Generated:** 2025-12-12
**Total Files Checked:** 43
**Clean Files:** 37 (86%)
**Files with Issues:** 6

## Summary

The Effect Patterns linter ran on all TypeScript examples in `content/new/src/` and found:
- **7 Errors** (must be fixed)
- **2 Warnings** (should be addressed)

All issues are in patterns that are still in development (`content/new/`). Published patterns have no violations.

---

## Errors (7 found)

### Deprecated API Usage (5 errors)

#### 1. combinator-zip.ts (2 errors)
- **Line 11:** `Option.zip` is deprecated → Use `Option.all` instead
- **Line 16:** `Either.zip` is deprecated → Use `Either.all` instead
- **Category:** effect-deprecated-api
- **Severity:** Error
- **Action:** Update pattern to use modern APIs

#### 2. combinator-conditional.ts (2 errors)
- **Line 10:** `Option.cond` is deprecated → Use ternary with `Option.some`/`Option.none`
- **Line 13:** `Either.cond` is deprecated → Use ternary with `Either.right`/`Either.left`
- **Category:** effect-deprecated-api
- **Severity:** Error
- **Action:** Update pattern to use modern APIs

#### 3. constructor-from-nullable-option-either.ts (2 errors)
- **Line 9:** `Effect.fromOption` is deprecated → Use `Option.match` instead
- **Line 13:** `Effect.fromEither` is deprecated → Use `Either.match` instead
- **Category:** effect-deprecated-api
- **Severity:** Error
- **Action:** Update pattern to use modern APIs

#### 4. pattern-matchtag.ts (1 error)
- **Line 15:** `Effect.matchTag` is deprecated → Use `Effect.catchTags` instead
- **Category:** effect-deprecated-api
- **Severity:** Error
- **Action:** Update pattern to use `Effect.catchTags`

---

## Warnings (2 found)

### Missing Concurrency Specification

These patterns use `Effect.all()` without explicitly specifying the `concurrency` option, which defaults to sequential execution.

#### 1. constructor-from-iterable.ts
- **Line 16:** `Effect.all` missing `concurrency` option
- **Category:** effect-explicit-concurrency
- **Severity:** Warning
- **Recommendation:** Add `{ concurrency: 'unbounded' }` or `{ concurrency: N }` if sequential is intentional
- **Auto-fixable:** Yes (with explicit concurrency)

#### 2. combinator-foreach-all.ts
- **Line 10:** `Effect.all` missing `concurrency` option
- **Category:** effect-explicit-concurrency
- **Severity:** Warning
- **Recommendation:** Add `{ concurrency: 'unbounded' }` or `{ concurrency: N }` if sequential is intentional
- **Auto-fixable:** Yes (with explicit concurrency)

---

## Next Steps

### For Pattern Authors

1. **Fix deprecated APIs** - Update the 5 patterns using deprecated Effect APIs to use current versions
2. **Add concurrency specifications** - Explicitly specify concurrency for the 2 warnings
3. **Re-run linter** - Verify fixes with `bun run ep lint content/new/src/*.ts`

### For CI/CD

The linter is integrated into:
- **Pipeline:** Added to `scripts/publish/pipeline.ts` after validation step
- **GitHub Actions:** New `lint-patterns` job runs on all PRs and commits
- **Configuration:** Use `continue-on-error: true` in CI to avoid blocking until violations are resolved

### Severity Levels

- **Errors** (7): Must be fixed before publishing - these use deprecated APIs
- **Warnings** (2): Should be addressed - best practices for concurrency

---

## Linter Rules Reference

The Effect Patterns linter enforces 6 rules:

1. **effect-use-taperror** - Use `Effect.tapError` for logging
2. **effect-explicit-concurrency** - Always specify concurrency
3. **effect-deprecated-api** - Avoid deprecated APIs
4. **effect-prefer-pipe** - Prefer `.pipe()` for chains
5. **effect-stream-memory** - Avoid memory-loading in streams
6. **effect-error-model** - Use `Data.TaggedError`

See `docs/guides/CONTRIBUTING.md` for detailed descriptions and best practices.

---

## Statistics

| Metric | Value |
|--------|-------|
| Files Checked | 43 |
| Clean Files | 37 (86%) |
| Files with Issues | 6 (14%) |
| Deprecated API Errors | 5 |
| Concurrency Warnings | 2 |
| Total Issues | 9 |

---

## Recommendations

1. **Immediate:** Fix the 5 deprecated API violations - these are blocking issues
2. **Short-term:** Add concurrency specifications for the 2 warnings
3. **Ongoing:** Run linter before committing patterns to catch issues early
4. **CI/CD:** Monitor linter results in GitHub Actions to track improvement over time

---

*Report generated by the Effect Patterns Linter v1.0*
