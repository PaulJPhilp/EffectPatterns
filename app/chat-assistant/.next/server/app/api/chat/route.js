/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/openai */ \"(rsc)/./node_modules/@ai-sdk/openai/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _app_server_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app/server/tools */ \"(rsc)/./app/server/tools.ts\");\n\n\n\n// Allow streaming responses up to 30 seconds\nconst maxDuration = 30;\n/**\n * POST /api/chat\n *\n * Main chat API endpoint that handles streaming AI responses\n * This is a thin Next.js layer that orchestrates between the client and our Effect services\n */ async function POST(req) {\n    const { messages } = await req.json();\n    const result = (0,ai__WEBPACK_IMPORTED_MODULE_1__.streamText)({\n        model: (0,_ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__.openai)(\"gpt-4o\"),\n        messages,\n        tools: _app_server_tools__WEBPACK_IMPORTED_MODULE_0__.tools,\n        system: `You are an expert Effect-TS code reviewer and teacher.\n\n      Your role is to help developers learn and write better Effect-TS code by:\n      1. Answering questions about Effect patterns and best practices\n      2. Searching the pattern library when users ask \"how do I...\" questions\n      3. Reviewing code and suggesting improvements based on Effect best practices\n      4. Providing clear explanations with code examples\n\n      When answering questions:\n      - Use the searchPatterns tool to find relevant patterns from the library\n      - Use the reviewCodeSnippet tool when users paste code for review\n      - Explain concepts clearly with examples\n      - Reference official Effect patterns from the library\n      - When suggesting improvements, explain the \"why\" behind the change\n      - Be concise but thorough\n\n      When reviewing code:\n      - Identify anti-patterns and suggest better alternatives\n      - Reference specific patterns from the library\n      - Explain the benefits of the suggested refactoring\n      - If a diff is provided, present it clearly\n\n      Always prioritize helping users understand the \"why\" behind patterns,\n      not just the \"how\".`\n    });\n    return result.toDataStreamResponse();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDUjtBQUNXO0FBRTNDLDZDQUE2QztBQUN0QyxNQUFNRyxjQUFjLEdBQUc7QUFFOUI7Ozs7O0NBS0MsR0FDTSxlQUFlQyxLQUFLQyxHQUFZO0lBQ3JDLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUcsTUFBTUQsSUFBSUUsSUFBSTtJQUVuQyxNQUFNQyxTQUFTUCw4Q0FBVUEsQ0FBQztRQUN4QlEsT0FBT1Qsc0RBQU1BLENBQUM7UUFDZE07UUFDQUosS0FBS0Esc0RBQUFBO1FBQ0xRLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7eUJBdUJZLENBQUM7SUFDeEI7SUFFQSxPQUFPRixPQUFPRyxvQkFBb0I7QUFDcEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXVsL1Byb2plY3RzL0VmZmVjdC1QYXR0ZXJucy9hcHAvY2hhdC1hc3Npc3RhbnQvYXBwL2FwaS9jaGF0L3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9wZW5haSB9IGZyb20gXCJAYWktc2RrL29wZW5haVwiO1xuaW1wb3J0IHsgc3RyZWFtVGV4dCB9IGZyb20gXCJhaVwiO1xuaW1wb3J0IHsgdG9vbHMgfSBmcm9tIFwiQC9hcHAvc2VydmVyL3Rvb2xzXCI7XG5cbi8vIEFsbG93IHN0cmVhbWluZyByZXNwb25zZXMgdXAgdG8gMzAgc2Vjb25kc1xuZXhwb3J0IGNvbnN0IG1heER1cmF0aW9uID0gMzA7XG5cbi8qKlxuICogUE9TVCAvYXBpL2NoYXRcbiAqXG4gKiBNYWluIGNoYXQgQVBJIGVuZHBvaW50IHRoYXQgaGFuZGxlcyBzdHJlYW1pbmcgQUkgcmVzcG9uc2VzXG4gKiBUaGlzIGlzIGEgdGhpbiBOZXh0LmpzIGxheWVyIHRoYXQgb3JjaGVzdHJhdGVzIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgb3VyIEVmZmVjdCBzZXJ2aWNlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgY29uc3QgeyBtZXNzYWdlcyB9ID0gYXdhaXQgcmVxLmpzb24oKTtcblxuICBjb25zdCByZXN1bHQgPSBzdHJlYW1UZXh0KHtcbiAgICBtb2RlbDogb3BlbmFpKFwiZ3B0LTRvXCIpLFxuICAgIG1lc3NhZ2VzLFxuICAgIHRvb2xzLFxuICAgIHN5c3RlbTogYFlvdSBhcmUgYW4gZXhwZXJ0IEVmZmVjdC1UUyBjb2RlIHJldmlld2VyIGFuZCB0ZWFjaGVyLlxuXG4gICAgICBZb3VyIHJvbGUgaXMgdG8gaGVscCBkZXZlbG9wZXJzIGxlYXJuIGFuZCB3cml0ZSBiZXR0ZXIgRWZmZWN0LVRTIGNvZGUgYnk6XG4gICAgICAxLiBBbnN3ZXJpbmcgcXVlc3Rpb25zIGFib3V0IEVmZmVjdCBwYXR0ZXJucyBhbmQgYmVzdCBwcmFjdGljZXNcbiAgICAgIDIuIFNlYXJjaGluZyB0aGUgcGF0dGVybiBsaWJyYXJ5IHdoZW4gdXNlcnMgYXNrIFwiaG93IGRvIEkuLi5cIiBxdWVzdGlvbnNcbiAgICAgIDMuIFJldmlld2luZyBjb2RlIGFuZCBzdWdnZXN0aW5nIGltcHJvdmVtZW50cyBiYXNlZCBvbiBFZmZlY3QgYmVzdCBwcmFjdGljZXNcbiAgICAgIDQuIFByb3ZpZGluZyBjbGVhciBleHBsYW5hdGlvbnMgd2l0aCBjb2RlIGV4YW1wbGVzXG5cbiAgICAgIFdoZW4gYW5zd2VyaW5nIHF1ZXN0aW9uczpcbiAgICAgIC0gVXNlIHRoZSBzZWFyY2hQYXR0ZXJucyB0b29sIHRvIGZpbmQgcmVsZXZhbnQgcGF0dGVybnMgZnJvbSB0aGUgbGlicmFyeVxuICAgICAgLSBVc2UgdGhlIHJldmlld0NvZGVTbmlwcGV0IHRvb2wgd2hlbiB1c2VycyBwYXN0ZSBjb2RlIGZvciByZXZpZXdcbiAgICAgIC0gRXhwbGFpbiBjb25jZXB0cyBjbGVhcmx5IHdpdGggZXhhbXBsZXNcbiAgICAgIC0gUmVmZXJlbmNlIG9mZmljaWFsIEVmZmVjdCBwYXR0ZXJucyBmcm9tIHRoZSBsaWJyYXJ5XG4gICAgICAtIFdoZW4gc3VnZ2VzdGluZyBpbXByb3ZlbWVudHMsIGV4cGxhaW4gdGhlIFwid2h5XCIgYmVoaW5kIHRoZSBjaGFuZ2VcbiAgICAgIC0gQmUgY29uY2lzZSBidXQgdGhvcm91Z2hcblxuICAgICAgV2hlbiByZXZpZXdpbmcgY29kZTpcbiAgICAgIC0gSWRlbnRpZnkgYW50aS1wYXR0ZXJucyBhbmQgc3VnZ2VzdCBiZXR0ZXIgYWx0ZXJuYXRpdmVzXG4gICAgICAtIFJlZmVyZW5jZSBzcGVjaWZpYyBwYXR0ZXJucyBmcm9tIHRoZSBsaWJyYXJ5XG4gICAgICAtIEV4cGxhaW4gdGhlIGJlbmVmaXRzIG9mIHRoZSBzdWdnZXN0ZWQgcmVmYWN0b3JpbmdcbiAgICAgIC0gSWYgYSBkaWZmIGlzIHByb3ZpZGVkLCBwcmVzZW50IGl0IGNsZWFybHlcblxuICAgICAgQWx3YXlzIHByaW9yaXRpemUgaGVscGluZyB1c2VycyB1bmRlcnN0YW5kIHRoZSBcIndoeVwiIGJlaGluZCBwYXR0ZXJucyxcbiAgICAgIG5vdCBqdXN0IHRoZSBcImhvd1wiLmAsXG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQudG9EYXRhU3RyZWFtUmVzcG9uc2UoKTtcbn1cbiJdLCJuYW1lcyI6WyJvcGVuYWkiLCJzdHJlYW1UZXh0IiwidG9vbHMiLCJtYXhEdXJhdGlvbiIsIlBPU1QiLCJyZXEiLCJtZXNzYWdlcyIsImpzb24iLCJyZXN1bHQiLCJtb2RlbCIsInN5c3RlbSIsInRvRGF0YVN0cmVhbVJlc3BvbnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/server/runtime.ts":
/*!*******************************!*\
  !*** ./app/server/runtime.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppLayer: () => (/* binding */ AppLayer),\n/* harmony export */   runEffect: () => (/* binding */ runEffect)\n/* harmony export */ });\n/* harmony import */ var _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=Effect,Layer,Logger,Runtime!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=Effect,Layer,Logger,Runtime!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Effect,Layer,Logger,Runtime!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Effect,Layer,Logger,Runtime!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var _services_mcp_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./services/mcp-client */ \"(rsc)/./app/server/services/mcp-client.ts\");\n\n\n/**\n * AppLayer - Composition of all application layers\n * This is where all service dependencies are wired together\n */ const AppLayer = _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_1__.mergeAll(_services_mcp_client__WEBPACK_IMPORTED_MODULE_0__.McpClientLive, _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_2__.pretty);\n/**\n * appRuntime - Singleton Effect Runtime for the entire application\n * Created once when this module is loaded and cached by Node.js module system\n *\n * This is a performance optimization critical for serverless environments:\n * - The runtime is instantiated only once per container\n * - Subsequent invocations reuse the same runtime\n * - Avoids reconstructing the dependency graph on every request\n */ const appRuntime = _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_3__.runSync(_barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_3__.scoped(_barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_1__.toRuntime(AppLayer)));\n/**\n * runEffect - Helper function to execute an Effect program using the app runtime\n *\n * This provides a clean Promise-based interface for the Next.js API routes\n *\n * @param effect - The Effect program to execute\n * @returns A Promise that resolves with the effect's result or rejects with an error\n */ function runEffect(effect) {\n    return _barrel_optimize_names_Effect_Layer_Logger_Runtime_effect__WEBPACK_IMPORTED_MODULE_4__.runPromise(appRuntime)(effect);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmVyL3J1bnRpbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3RDtBQUNTO0FBT2pFOzs7Q0FHQyxHQUNNLE1BQU1LLFdBQVdKLCtGQUFjLENBQ3BDRywrREFBYUEsRUFDYkQsNkZBQWEsRUFDYjtBQUVGOzs7Ozs7OztDQVFDLEdBQ0QsTUFBTUssYUFBMENSLDhGQUFjLENBQzVEQSw2RkFBYSxDQUFDQyxnR0FBZSxDQUFDSTtBQUdoQzs7Ozs7OztDQU9DLEdBQ00sU0FBU08sVUFDZEMsTUFBdUM7SUFFdkMsT0FBT1gsaUdBQWtCLENBQUNNLFlBQVlLO0FBQ3hDIiwic291cmNlcyI6WyIvVXNlcnMvcGF1bC9Qcm9qZWN0cy9FZmZlY3QtUGF0dGVybnMvYXBwL2NoYXQtYXNzaXN0YW50L2FwcC9zZXJ2ZXIvcnVudGltZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZmZlY3QsIExheWVyLCBSdW50aW1lLCBMb2dnZXIgfSBmcm9tIFwiZWZmZWN0XCI7XG5pbXBvcnQgeyBNY3BDbGllbnQsIE1jcENsaWVudExpdmUgfSBmcm9tIFwiLi9zZXJ2aWNlcy9tY3AtY2xpZW50XCI7XG5cbi8qKlxuICogQXBwQ29udGV4dCAtIFVuaW9uIG9mIGFsbCBzZXJ2aWNlcyByZXF1aXJlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqL1xuZXhwb3J0IHR5cGUgQXBwQ29udGV4dCA9IE1jcENsaWVudDtcblxuLyoqXG4gKiBBcHBMYXllciAtIENvbXBvc2l0aW9uIG9mIGFsbCBhcHBsaWNhdGlvbiBsYXllcnNcbiAqIFRoaXMgaXMgd2hlcmUgYWxsIHNlcnZpY2UgZGVwZW5kZW5jaWVzIGFyZSB3aXJlZCB0b2dldGhlclxuICovXG5leHBvcnQgY29uc3QgQXBwTGF5ZXIgPSBMYXllci5tZXJnZUFsbChcbiAgTWNwQ2xpZW50TGl2ZSxcbiAgTG9nZ2VyLnByZXR0eVxuKTtcblxuLyoqXG4gKiBhcHBSdW50aW1lIC0gU2luZ2xldG9uIEVmZmVjdCBSdW50aW1lIGZvciB0aGUgZW50aXJlIGFwcGxpY2F0aW9uXG4gKiBDcmVhdGVkIG9uY2Ugd2hlbiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgYW5kIGNhY2hlZCBieSBOb2RlLmpzIG1vZHVsZSBzeXN0ZW1cbiAqXG4gKiBUaGlzIGlzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIGNyaXRpY2FsIGZvciBzZXJ2ZXJsZXNzIGVudmlyb25tZW50czpcbiAqIC0gVGhlIHJ1bnRpbWUgaXMgaW5zdGFudGlhdGVkIG9ubHkgb25jZSBwZXIgY29udGFpbmVyXG4gKiAtIFN1YnNlcXVlbnQgaW52b2NhdGlvbnMgcmV1c2UgdGhlIHNhbWUgcnVudGltZVxuICogLSBBdm9pZHMgcmVjb25zdHJ1Y3RpbmcgdGhlIGRlcGVuZGVuY3kgZ3JhcGggb24gZXZlcnkgcmVxdWVzdFxuICovXG5jb25zdCBhcHBSdW50aW1lOiBSdW50aW1lLlJ1bnRpbWU8QXBwQ29udGV4dD4gPSBFZmZlY3QucnVuU3luYyhcbiAgRWZmZWN0LnNjb3BlZChMYXllci50b1J1bnRpbWUoQXBwTGF5ZXIpKVxuKTtcblxuLyoqXG4gKiBydW5FZmZlY3QgLSBIZWxwZXIgZnVuY3Rpb24gdG8gZXhlY3V0ZSBhbiBFZmZlY3QgcHJvZ3JhbSB1c2luZyB0aGUgYXBwIHJ1bnRpbWVcbiAqXG4gKiBUaGlzIHByb3ZpZGVzIGEgY2xlYW4gUHJvbWlzZS1iYXNlZCBpbnRlcmZhY2UgZm9yIHRoZSBOZXh0LmpzIEFQSSByb3V0ZXNcbiAqXG4gKiBAcGFyYW0gZWZmZWN0IC0gVGhlIEVmZmVjdCBwcm9ncmFtIHRvIGV4ZWN1dGVcbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGVmZmVjdCdzIHJlc3VsdCBvciByZWplY3RzIHdpdGggYW4gZXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bkVmZmVjdDxFLCBBPihcbiAgZWZmZWN0OiBFZmZlY3QuRWZmZWN0PEEsIEUsIEFwcENvbnRleHQ+XG4pOiBQcm9taXNlPEE+IHtcbiAgcmV0dXJuIFJ1bnRpbWUucnVuUHJvbWlzZShhcHBSdW50aW1lKShlZmZlY3QpO1xufVxuIl0sIm5hbWVzIjpbIkVmZmVjdCIsIkxheWVyIiwiUnVudGltZSIsIkxvZ2dlciIsIk1jcENsaWVudExpdmUiLCJBcHBMYXllciIsIm1lcmdlQWxsIiwicHJldHR5IiwiYXBwUnVudGltZSIsInJ1blN5bmMiLCJzY29wZWQiLCJ0b1J1bnRpbWUiLCJydW5FZmZlY3QiLCJlZmZlY3QiLCJydW5Qcm9taXNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/server/runtime.ts\n");

/***/ }),

/***/ "(rsc)/./app/server/services/mcp-client.ts":
/*!*******************************************!*\
  !*** ./app/server/services/mcp-client.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   McpClient: () => (/* binding */ McpClient),\n/* harmony export */   McpClientLive: () => (/* binding */ McpClientLive),\n/* harmony export */   McpError: () => (/* binding */ McpError)\n/* harmony export */ });\n/* harmony import */ var _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! __barrel_optimize__?names=Context,Data,Effect,Layer!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=Context,Data,Effect,Layer!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=Context,Data,Effect,Layer!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Context,Data,Effect,Layer!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n\n/**\n * MCP Error - tagged error for MCP server communication failures\n */ class McpError extends _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_0__.TaggedError(\"McpError\") {\n}\n/**\n * McpClient Service Interface\n */ class McpClient extends _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_1__.Tag(\"McpClient\")() {\n}\n/**\n * Live implementation of McpClient\n * Communicates with the MCP server via HTTP\n */ const McpClientLive = _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_2__.succeed(McpClient, McpClient.of({\n    reviewCode: (code)=>_barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_3__.gen(function*() {\n            const mcpServerUrl = process.env.MCP_SERVER_URL || \"http://localhost:3000\";\n            // Make HTTP request to MCP server\n            const response = yield* _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_3__.tryPromise({\n                try: ()=>fetch(`${mcpServerUrl}/api/patterns/explain`, {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            code,\n                            context: \"Review this Effect-TS code and suggest improvements\"\n                        })\n                    }),\n                catch: (error)=>new McpError({\n                        message: \"Failed to connect to MCP server\",\n                        cause: error\n                    })\n            });\n            // Check if response is ok\n            if (!response.ok) {\n                return yield* _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_3__.fail(new McpError({\n                    message: `MCP server returned ${response.status}: ${response.statusText}`\n                }));\n            }\n            // Parse response\n            const data = yield* _barrel_optimize_names_Context_Data_Effect_Layer_effect__WEBPACK_IMPORTED_MODULE_3__.tryPromise({\n                try: ()=>response.json(),\n                catch: (error)=>new McpError({\n                        message: \"Failed to parse MCP server response\",\n                        cause: error\n                    })\n            });\n            // Extract code review information\n            const codeReview = {\n                analysis: data.explanation || data.analysis || \"No analysis provided\",\n                suggestion: data.suggestion || \"Consider reviewing Effect best practices\",\n                diff: data.diff || \"\"\n            };\n            return codeReview;\n        })\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvc2VydmVyL3NlcnZpY2VzL21jcC1jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzRDtBQVd0RDs7Q0FFQyxHQUNNLE1BQU1JLGlCQUFpQkQsZ0dBQWdCLENBQUM7QUFHM0M7QUFFSjs7Q0FFQyxHQUNNLE1BQU1HLGtCQUFrQk4sd0ZBQVcsQ0FBQztBQUt0QztBQUVMOzs7Q0FHQyxHQUNNLE1BQU1RLGdCQUFnQk4sNEZBQWEsQ0FDeENJLFdBQ0FBLFVBQVVJLEVBQUUsQ0FBQztJQUNYQyxZQUFZLENBQUNDLE9BQ1hYLHdGQUFVLENBQUM7WUFDVCxNQUFNYSxlQUFlQyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtZQUVuRCxrQ0FBa0M7WUFDbEMsTUFBTUMsV0FBVyxPQUFPakIsK0ZBQWlCLENBQUM7Z0JBQ3hDbUIsS0FBSyxJQUNIQyxNQUFNLEdBQUdQLGFBQWEscUJBQXFCLENBQUMsRUFBRTt3QkFDNUNRLFFBQVE7d0JBQ1JDLFNBQVM7NEJBQ1AsZ0JBQWdCO3dCQUNsQjt3QkFDQUMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDOzRCQUNuQmQ7NEJBQ0FlLFNBQVM7d0JBQ1g7b0JBQ0Y7Z0JBQ0ZDLE9BQU8sQ0FBQ0MsUUFDTixJQUFJekIsU0FBUzt3QkFDWDBCLFNBQVM7d0JBQ1RDLE9BQU9GO29CQUNUO1lBQ0o7WUFFQSwwQkFBMEI7WUFDMUIsSUFBSSxDQUFDWCxTQUFTYyxFQUFFLEVBQUU7Z0JBQ2hCLE9BQU8sT0FBTy9CLHlGQUFXLENBQ3ZCLElBQUlHLFNBQVM7b0JBQ1gwQixTQUFTLENBQUMsb0JBQW9CLEVBQUVaLFNBQVNnQixNQUFNLENBQUMsRUFBRSxFQUFFaEIsU0FBU2lCLFVBQVUsRUFBRTtnQkFDM0U7WUFFSjtZQUVBLGlCQUFpQjtZQUNqQixNQUFNQyxPQUFPLE9BQU9uQywrRkFBaUIsQ0FBQztnQkFDcENtQixLQUFLLElBQU1GLFNBQVNtQixJQUFJO2dCQUN4QlQsT0FBTyxDQUFDQyxRQUNOLElBQUl6QixTQUFTO3dCQUNYMEIsU0FBUzt3QkFDVEMsT0FBT0Y7b0JBQ1Q7WUFDSjtZQUVBLGtDQUFrQztZQUNsQyxNQUFNUyxhQUF5QjtnQkFDN0JDLFVBQVVILEtBQUtJLFdBQVcsSUFBSUosS0FBS0csUUFBUSxJQUFJO2dCQUMvQ0UsWUFBWUwsS0FBS0ssVUFBVSxJQUFJO2dCQUMvQkMsTUFBTU4sS0FBS00sSUFBSSxJQUFJO1lBQ3JCO1lBRUEsT0FBT0o7UUFDVDtBQUNKLElBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9wYXVsL1Byb2plY3RzL0VmZmVjdC1QYXR0ZXJucy9hcHAvY2hhdC1hc3Npc3RhbnQvYXBwL3NlcnZlci9zZXJ2aWNlcy9tY3AtY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRleHQsIEVmZmVjdCwgTGF5ZXIsIERhdGEgfSBmcm9tIFwiZWZmZWN0XCI7XG5cbi8qKlxuICogQ29kZSBSZXZpZXcgcmVzdWx0IGZyb20gTUNQIFNlcnZlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvZGVSZXZpZXcge1xuICBhbmFseXNpczogc3RyaW5nO1xuICBzdWdnZXN0aW9uOiBzdHJpbmc7XG4gIGRpZmY6IHN0cmluZzsgLy8gVW5pZmllZCBkaWZmIGZvcm1hdFxufVxuXG4vKipcbiAqIE1DUCBFcnJvciAtIHRhZ2dlZCBlcnJvciBmb3IgTUNQIHNlcnZlciBjb21tdW5pY2F0aW9uIGZhaWx1cmVzXG4gKi9cbmV4cG9ydCBjbGFzcyBNY3BFcnJvciBleHRlbmRzIERhdGEuVGFnZ2VkRXJyb3IoXCJNY3BFcnJvclwiKTx7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY2F1c2U/OiB1bmtub3duO1xufT4ge31cblxuLyoqXG4gKiBNY3BDbGllbnQgU2VydmljZSBJbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIE1jcENsaWVudCBleHRlbmRzIENvbnRleHQuVGFnKFwiTWNwQ2xpZW50XCIpPFxuICBNY3BDbGllbnQsXG4gIHtcbiAgICByZWFkb25seSByZXZpZXdDb2RlOiAoY29kZTogc3RyaW5nKSA9PiBFZmZlY3QuRWZmZWN0PENvZGVSZXZpZXcsIE1jcEVycm9yPjtcbiAgfVxuPigpIHt9XG5cbi8qKlxuICogTGl2ZSBpbXBsZW1lbnRhdGlvbiBvZiBNY3BDbGllbnRcbiAqIENvbW11bmljYXRlcyB3aXRoIHRoZSBNQ1Agc2VydmVyIHZpYSBIVFRQXG4gKi9cbmV4cG9ydCBjb25zdCBNY3BDbGllbnRMaXZlID0gTGF5ZXIuc3VjY2VlZChcbiAgTWNwQ2xpZW50LFxuICBNY3BDbGllbnQub2Yoe1xuICAgIHJldmlld0NvZGU6IChjb2RlOiBzdHJpbmcpID0+XG4gICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IG1jcFNlcnZlclVybCA9IHByb2Nlc3MuZW52Lk1DUF9TRVJWRVJfVVJMIHx8IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG5cbiAgICAgICAgLy8gTWFrZSBIVFRQIHJlcXVlc3QgdG8gTUNQIHNlcnZlclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgdHJ5OiAoKSA9PlxuICAgICAgICAgICAgZmV0Y2goYCR7bWNwU2VydmVyVXJsfS9hcGkvcGF0dGVybnMvZXhwbGFpbmAsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBcIlJldmlldyB0aGlzIEVmZmVjdC1UUyBjb2RlIGFuZCBzdWdnZXN0IGltcHJvdmVtZW50c1wiLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIGNhdGNoOiAoZXJyb3IpID0+XG4gICAgICAgICAgICBuZXcgTWNwRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjb25uZWN0IHRvIE1DUCBzZXJ2ZXJcIixcbiAgICAgICAgICAgICAgY2F1c2U6IGVycm9yLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHJlc3BvbnNlIGlzIG9rXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC5mYWlsKFxuICAgICAgICAgICAgbmV3IE1jcEVycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogYE1DUCBzZXJ2ZXIgcmV0dXJuZWQgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhcnNlIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuICAgICAgICAgIHRyeTogKCkgPT4gcmVzcG9uc2UuanNvbigpLFxuICAgICAgICAgIGNhdGNoOiAoZXJyb3IpID0+XG4gICAgICAgICAgICBuZXcgTWNwRXJyb3Ioe1xuICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBwYXJzZSBNQ1Agc2VydmVyIHJlc3BvbnNlXCIsXG4gICAgICAgICAgICAgIGNhdXNlOiBlcnJvcixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFeHRyYWN0IGNvZGUgcmV2aWV3IGluZm9ybWF0aW9uXG4gICAgICAgIGNvbnN0IGNvZGVSZXZpZXc6IENvZGVSZXZpZXcgPSB7XG4gICAgICAgICAgYW5hbHlzaXM6IGRhdGEuZXhwbGFuYXRpb24gfHwgZGF0YS5hbmFseXNpcyB8fCBcIk5vIGFuYWx5c2lzIHByb3ZpZGVkXCIsXG4gICAgICAgICAgc3VnZ2VzdGlvbjogZGF0YS5zdWdnZXN0aW9uIHx8IFwiQ29uc2lkZXIgcmV2aWV3aW5nIEVmZmVjdCBiZXN0IHByYWN0aWNlc1wiLFxuICAgICAgICAgIGRpZmY6IGRhdGEuZGlmZiB8fCBcIlwiLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBjb2RlUmV2aWV3O1xuICAgICAgfSksXG4gIH0pXG4pO1xuIl0sIm5hbWVzIjpbIkNvbnRleHQiLCJFZmZlY3QiLCJMYXllciIsIkRhdGEiLCJNY3BFcnJvciIsIlRhZ2dlZEVycm9yIiwiTWNwQ2xpZW50IiwiVGFnIiwiTWNwQ2xpZW50TGl2ZSIsInN1Y2NlZWQiLCJvZiIsInJldmlld0NvZGUiLCJjb2RlIiwiZ2VuIiwibWNwU2VydmVyVXJsIiwicHJvY2VzcyIsImVudiIsIk1DUF9TRVJWRVJfVVJMIiwicmVzcG9uc2UiLCJ0cnlQcm9taXNlIiwidHJ5IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb250ZXh0IiwiY2F0Y2giLCJlcnJvciIsIm1lc3NhZ2UiLCJjYXVzZSIsIm9rIiwiZmFpbCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJkYXRhIiwianNvbiIsImNvZGVSZXZpZXciLCJhbmFseXNpcyIsImV4cGxhbmF0aW9uIiwic3VnZ2VzdGlvbiIsImRpZmYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/server/services/mcp-client.ts\n");

/***/ }),

/***/ "(rsc)/./app/server/tools.ts":
/*!*****************************!*\
  !*** ./app/server/tools.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reviewCodeSnippetTool: () => (/* binding */ reviewCodeSnippetTool),\n/* harmony export */   searchPatternsTool: () => (/* binding */ searchPatternsTool),\n/* harmony export */   tools: () => (/* binding */ tools)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _barrel_optimize_names_Effect_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Effect!=!effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime */ \"(rsc)/./app/server/runtime.ts\");\n\n\n\n\nconst mockPatterns = [\n    {\n        id: \"run-tasks-in-parallel\",\n        title: \"Run Tasks in Parallel\",\n        description: \"Use Effect.all or Effect.forEachPar to orchestrate parallel work.\",\n        category: \"concurrency\",\n        difficulty: \"intermediate\",\n        tags: [\n            \"concurrency\",\n            \"parallel\",\n            \"fibers\"\n        ],\n        keywords: [\n            \"concurrency\",\n            \"parallel\",\n            \"parallelize\",\n            \"forEachPar\",\n            \"Effect.all\"\n        ]\n    },\n    {\n        id: \"coordinate-fibers\",\n        title: \"Coordinate Fibers Safely\",\n        description: \"Fork fibers and join or interrupt them to manage concurrency explicitly.\",\n        category: \"concurrency\",\n        difficulty: \"advanced\",\n        tags: [\n            \"concurrency\",\n            \"fibers\",\n            \"coordination\"\n        ],\n        keywords: [\n            \"fiber\",\n            \"fibers\",\n            \"join\",\n            \"interrupt\"\n        ]\n    },\n    {\n        id: \"retry-with-schedule\",\n        title: \"Retry with Exponential Backoff\",\n        description: \"Combine Effect.retry with Schedule.exponential and jitter for robustness.\",\n        category: \"resilience\",\n        difficulty: \"intermediate\",\n        tags: [\n            \"retry\",\n            \"schedule\",\n            \"backoff\"\n        ],\n        keywords: [\n            \"retry\",\n            \"backoff\",\n            \"exponential\",\n            \"schedule\"\n        ]\n    },\n    {\n        id: \"handle-errors-with-catch\",\n        title: \"Handle Errors with catchTag, catchTags, and catchAll\",\n        description: \"Learn how to handle errors in Effect programs using typed error recovery.\",\n        category: \"error-handling\",\n        difficulty: \"beginner\",\n        tags: [\n            \"error-handling\",\n            \"recovery\",\n            \"typed-errors\"\n        ],\n        keywords: [\n            \"error\",\n            \"catch\",\n            \"typed\",\n            \"recovery\"\n        ]\n    }\n];\n/**\n * AI Tools - Functions that the LLM can invoke\n *\n * These are wrappers around our Effect services that provide\n * a clean interface for the Vercel AI SDK\n */ /**\n * searchPatterns Tool\n * Allows the AI to search for Effect patterns in the pattern library\n */ const searchPatternsTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: `Search for Effect-TS patterns in the pattern library.\n    Use this when the user asks about how to do something with Effect,\n    wants to learn about a specific pattern, or needs examples.\n    Returns matching patterns with descriptions and code examples.`,\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        query: zod__WEBPACK_IMPORTED_MODULE_2__.string().describe(\"The search query (e.g., 'retry with backoff', 'error handling', 'concurrent processing')\"),\n        category: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().describe(\"Filter by category if specified\"),\n        difficulty: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().describe(\"Filter by difficulty level: beginner, intermediate, or advanced\"),\n        limit: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional().describe(\"Maximum number of results to return (default: 5)\")\n    }),\n    execute: async ({ query, category, difficulty, limit = 5 })=>{\n        // For now, we'll create a simplified implementation\n        // that returns mock data since we need to integrate with the toolkit properly\n        // In a full implementation, this would:\n        // 1. Load patterns from the toolkit\n        // 2. Search using the toolkit's search function\n        // 3. Return formatted results\n        const normalizedQuery = query.toLowerCase().trim();\n        const matches = mockPatterns.filter((pattern)=>{\n            if (category && pattern.category !== category) {\n                return false;\n            }\n            if (difficulty && pattern.difficulty !== difficulty) {\n                return false;\n            }\n            if (normalizedQuery.length === 0) {\n                return true;\n            }\n            const inKeywords = pattern.keywords.some((keyword)=>normalizedQuery.includes(keyword.toLowerCase()));\n            const inTags = pattern.tags.some((tag)=>normalizedQuery.includes(tag.toLowerCase()));\n            return inKeywords || inTags;\n        });\n        const filtered = matches.length > 0 ? matches : mockPatterns;\n        const limited = filtered.slice(0, limit);\n        const total = filtered.length;\n        const summary = limited.length > 0 ? `Found ${total} pattern${total === 1 ? \"\" : \"s\"} matching \"${query}\". Top match: \"${limited[0].title}\" (${limited[0].category}).` : `No patterns found for \"${query}\".`;\n        return {\n            query,\n            total,\n            results: limited,\n            summary,\n            recommendations: limited.map((pattern)=>({\n                    id: pattern.id,\n                    title: pattern.title,\n                    why: pattern.description\n                }))\n        };\n    }\n});\n/**\n * reviewCodeSnippet Tool\n * Allows the AI to review Effect code and suggest improvements\n */ const reviewCodeSnippetTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: `Review an Effect-TS code snippet and suggest improvements.\n    Use this when the user pastes code and asks for review, refactoring suggestions,\n    or wants to know if they're following best practices.\n    Returns analysis, suggestions, and optionally a diff showing the improved code.`,\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        code: zod__WEBPACK_IMPORTED_MODULE_2__.string().describe(\"The Effect-TS code snippet to review\")\n    }),\n    execute: async ({ code })=>{\n        // Import McpClient dynamically to use in Effect context\n        const { McpClient } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./services/mcp-client */ \"(rsc)/./app/server/services/mcp-client.ts\"));\n        try {\n            const result = await (0,_runtime__WEBPACK_IMPORTED_MODULE_0__.runEffect)(_barrel_optimize_names_Effect_effect__WEBPACK_IMPORTED_MODULE_3__.gen(function*() {\n                const client = yield* McpClient;\n                return yield* client.reviewCode(code);\n            }));\n            return {\n                analysis: result.analysis,\n                suggestion: result.suggestion,\n                diff: result.diff,\n                reviewed: true\n            };\n        } catch (error) {\n            // If MCP server is not available, provide basic feedback\n            return {\n                analysis: \"MCP server is not available for detailed code review.\",\n                suggestion: \"Please ensure the MCP server is running at \" + (process.env.MCP_SERVER_URL || \"http://localhost:3000\"),\n                diff: \"\",\n                reviewed: false,\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            };\n        }\n    }\n});\n/**\n * Export all tools as a single object for the AI SDK\n */ const tools = {\n    searchPatterns: searchPatternsTool,\n    reviewCodeSnippet: reviewCodeSnippetTool\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTtnQkFDTkMsVUFBVTtnQkFDVkMsT0FBT0EsaUJBQWlCSSxRQUFRSixNQUFNSyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0FBQ0YsR0FBRztBQUVIOztDQUVDLEdBQ00sTUFBTUMsUUFBUTtJQUNuQkMsZ0JBQWdCbEQ7SUFDaEJtRCxtQkFBbUJuQjtBQUNyQixFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvcGF1bC9Qcm9qZWN0cy9FZmZlY3QtUGF0dGVybnMvYXBwL2NoYXQtYXNzaXN0YW50L2FwcC9zZXJ2ZXIvdG9vbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdG9vbCB9IGZyb20gXCJhaVwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IEVmZmVjdCB9IGZyb20gXCJlZmZlY3RcIjtcbmltcG9ydCB7IHJ1bkVmZmVjdCB9IGZyb20gXCIuL3J1bnRpbWVcIjtcbmltcG9ydCB7IHNlYXJjaFBhdHRlcm5zLCB0b1BhdHRlcm5TdW1tYXJ5IH0gZnJvbSBcIkBlZmZlY3QtcGF0dGVybnMvdG9vbGtpdFwiO1xuXG5jb25zdCBtb2NrUGF0dGVybnMgPSBbXG4gIHtcbiAgICBpZDogXCJydW4tdGFza3MtaW4tcGFyYWxsZWxcIixcbiAgICB0aXRsZTogXCJSdW4gVGFza3MgaW4gUGFyYWxsZWxcIixcbiAgICBkZXNjcmlwdGlvbjogXCJVc2UgRWZmZWN0LmFsbCBvciBFZmZlY3QuZm9yRWFjaFBhciB0byBvcmNoZXN0cmF0ZSBwYXJhbGxlbCB3b3JrLlwiLFxuICAgIGNhdGVnb3J5OiBcImNvbmN1cnJlbmN5XCIsXG4gICAgZGlmZmljdWx0eTogXCJpbnRlcm1lZGlhdGVcIixcbiAgICB0YWdzOiBbXCJjb25jdXJyZW5jeVwiLCBcInBhcmFsbGVsXCIsIFwiZmliZXJzXCJdLFxuICAgIGtleXdvcmRzOiBbXCJjb25jdXJyZW5jeVwiLCBcInBhcmFsbGVsXCIsIFwicGFyYWxsZWxpemVcIiwgXCJmb3JFYWNoUGFyXCIsIFwiRWZmZWN0LmFsbFwiXSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImNvb3JkaW5hdGUtZmliZXJzXCIsXG4gICAgdGl0bGU6IFwiQ29vcmRpbmF0ZSBGaWJlcnMgU2FmZWx5XCIsXG4gICAgZGVzY3JpcHRpb246IFwiRm9yayBmaWJlcnMgYW5kIGpvaW4gb3IgaW50ZXJydXB0IHRoZW0gdG8gbWFuYWdlIGNvbmN1cnJlbmN5IGV4cGxpY2l0bHkuXCIsXG4gICAgY2F0ZWdvcnk6IFwiY29uY3VycmVuY3lcIixcbiAgICBkaWZmaWN1bHR5OiBcImFkdmFuY2VkXCIsXG4gICAgdGFnczogW1wiY29uY3VycmVuY3lcIiwgXCJmaWJlcnNcIiwgXCJjb29yZGluYXRpb25cIl0sXG4gICAga2V5d29yZHM6IFtcImZpYmVyXCIsIFwiZmliZXJzXCIsIFwiam9pblwiLCBcImludGVycnVwdFwiXSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInJldHJ5LXdpdGgtc2NoZWR1bGVcIixcbiAgICB0aXRsZTogXCJSZXRyeSB3aXRoIEV4cG9uZW50aWFsIEJhY2tvZmZcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDb21iaW5lIEVmZmVjdC5yZXRyeSB3aXRoIFNjaGVkdWxlLmV4cG9uZW50aWFsIGFuZCBqaXR0ZXIgZm9yIHJvYnVzdG5lc3MuXCIsXG4gICAgY2F0ZWdvcnk6IFwicmVzaWxpZW5jZVwiLFxuICAgIGRpZmZpY3VsdHk6IFwiaW50ZXJtZWRpYXRlXCIsXG4gICAgdGFnczogW1wicmV0cnlcIiwgXCJzY2hlZHVsZVwiLCBcImJhY2tvZmZcIl0sXG4gICAga2V5d29yZHM6IFtcInJldHJ5XCIsIFwiYmFja29mZlwiLCBcImV4cG9uZW50aWFsXCIsIFwic2NoZWR1bGVcIl0sXG4gIH0sXG4gIHtcbiAgICBpZDogXCJoYW5kbGUtZXJyb3JzLXdpdGgtY2F0Y2hcIixcbiAgICB0aXRsZTogXCJIYW5kbGUgRXJyb3JzIHdpdGggY2F0Y2hUYWcsIGNhdGNoVGFncywgYW5kIGNhdGNoQWxsXCIsXG4gICAgZGVzY3JpcHRpb246IFwiTGVhcm4gaG93IHRvIGhhbmRsZSBlcnJvcnMgaW4gRWZmZWN0IHByb2dyYW1zIHVzaW5nIHR5cGVkIGVycm9yIHJlY292ZXJ5LlwiLFxuICAgIGNhdGVnb3J5OiBcImVycm9yLWhhbmRsaW5nXCIsXG4gICAgZGlmZmljdWx0eTogXCJiZWdpbm5lclwiLFxuICAgIHRhZ3M6IFtcImVycm9yLWhhbmRsaW5nXCIsIFwicmVjb3ZlcnlcIiwgXCJ0eXBlZC1lcnJvcnNcIl0sXG4gICAga2V5d29yZHM6IFtcImVycm9yXCIsIFwiY2F0Y2hcIiwgXCJ0eXBlZFwiLCBcInJlY292ZXJ5XCJdLFxuICB9LFxuXTtcblxuLyoqXG4gKiBBSSBUb29scyAtIEZ1bmN0aW9ucyB0aGF0IHRoZSBMTE0gY2FuIGludm9rZVxuICpcbiAqIFRoZXNlIGFyZSB3cmFwcGVycyBhcm91bmQgb3VyIEVmZmVjdCBzZXJ2aWNlcyB0aGF0IHByb3ZpZGVcbiAqIGEgY2xlYW4gaW50ZXJmYWNlIGZvciB0aGUgVmVyY2VsIEFJIFNES1xuICovXG5cbi8qKlxuICogc2VhcmNoUGF0dGVybnMgVG9vbFxuICogQWxsb3dzIHRoZSBBSSB0byBzZWFyY2ggZm9yIEVmZmVjdCBwYXR0ZXJucyBpbiB0aGUgcGF0dGVybiBsaWJyYXJ5XG4gKi9cbmV4cG9ydCBjb25zdCBzZWFyY2hQYXR0ZXJuc1Rvb2wgPSB0b29sKHtcbiAgZGVzY3JpcHRpb246IGBTZWFyY2ggZm9yIEVmZmVjdC1UUyBwYXR0ZXJucyBpbiB0aGUgcGF0dGVybiBsaWJyYXJ5LlxuICAgIFVzZSB0aGlzIHdoZW4gdGhlIHVzZXIgYXNrcyBhYm91dCBob3cgdG8gZG8gc29tZXRoaW5nIHdpdGggRWZmZWN0LFxuICAgIHdhbnRzIHRvIGxlYXJuIGFib3V0IGEgc3BlY2lmaWMgcGF0dGVybiwgb3IgbmVlZHMgZXhhbXBsZXMuXG4gICAgUmV0dXJucyBtYXRjaGluZyBwYXR0ZXJucyB3aXRoIGRlc2NyaXB0aW9ucyBhbmQgY29kZSBleGFtcGxlcy5gLFxuXG4gIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICBxdWVyeTogei5zdHJpbmcoKS5kZXNjcmliZShcIlRoZSBzZWFyY2ggcXVlcnkgKGUuZy4sICdyZXRyeSB3aXRoIGJhY2tvZmYnLCAnZXJyb3IgaGFuZGxpbmcnLCAnY29uY3VycmVudCBwcm9jZXNzaW5nJylcIiksXG4gICAgY2F0ZWdvcnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5kZXNjcmliZShcIkZpbHRlciBieSBjYXRlZ29yeSBpZiBzcGVjaWZpZWRcIiksXG4gICAgZGlmZmljdWx0eTogei5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiRmlsdGVyIGJ5IGRpZmZpY3VsdHkgbGV2ZWw6IGJlZ2lubmVyLCBpbnRlcm1lZGlhdGUsIG9yIGFkdmFuY2VkXCIpLFxuICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXCJNYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiAoZGVmYXVsdDogNSlcIiksXG4gIH0pLFxuXG4gIGV4ZWN1dGU6IGFzeW5jICh7IHF1ZXJ5LCBjYXRlZ29yeSwgZGlmZmljdWx0eSwgbGltaXQgPSA1IH0pID0+IHtcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBjcmVhdGUgYSBzaW1wbGlmaWVkIGltcGxlbWVudGF0aW9uXG4gICAgLy8gdGhhdCByZXR1cm5zIG1vY2sgZGF0YSBzaW5jZSB3ZSBuZWVkIHRvIGludGVncmF0ZSB3aXRoIHRoZSB0b29sa2l0IHByb3Blcmx5XG5cbiAgICAvLyBJbiBhIGZ1bGwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQ6XG4gICAgLy8gMS4gTG9hZCBwYXR0ZXJucyBmcm9tIHRoZSB0b29sa2l0XG4gICAgLy8gMi4gU2VhcmNoIHVzaW5nIHRoZSB0b29sa2l0J3Mgc2VhcmNoIGZ1bmN0aW9uXG4gICAgLy8gMy4gUmV0dXJuIGZvcm1hdHRlZCByZXN1bHRzXG5cbiAgICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblxuICAgIGNvbnN0IG1hdGNoZXMgPSBtb2NrUGF0dGVybnMuZmlsdGVyKChwYXR0ZXJuKSA9PiB7XG4gICAgICBpZiAoY2F0ZWdvcnkgJiYgcGF0dGVybi5jYXRlZ29yeSAhPT0gY2F0ZWdvcnkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGlmZmljdWx0eSAmJiBwYXR0ZXJuLmRpZmZpY3VsdHkgIT09IGRpZmZpY3VsdHkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAobm9ybWFsaXplZFF1ZXJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW5LZXl3b3JkcyA9IHBhdHRlcm4ua2V5d29yZHMuc29tZSgoa2V5d29yZDogc3RyaW5nKSA9PlxuICAgICAgICBub3JtYWxpemVkUXVlcnkuaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgaW5UYWdzID0gcGF0dGVybi50YWdzLnNvbWUoKHRhZzogc3RyaW5nKSA9PlxuICAgICAgICBub3JtYWxpemVkUXVlcnkuaW5jbHVkZXModGFnLnRvTG93ZXJDYXNlKCkpXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gaW5LZXl3b3JkcyB8fCBpblRhZ3M7XG4gICAgfSk7XG5cbiAgICBjb25zdCBmaWx0ZXJlZCA9IG1hdGNoZXMubGVuZ3RoID4gMCA/IG1hdGNoZXMgOiBtb2NrUGF0dGVybnM7XG4gICAgY29uc3QgbGltaXRlZCA9IGZpbHRlcmVkLnNsaWNlKDAsIGxpbWl0KTtcblxuICAgIGNvbnN0IHRvdGFsID0gZmlsdGVyZWQubGVuZ3RoO1xuICAgIGNvbnN0IHN1bW1hcnkgPVxuICAgICAgbGltaXRlZC5sZW5ndGggPiAwXG4gICAgICAgID8gYEZvdW5kICR7dG90YWx9IHBhdHRlcm4ke3RvdGFsID09PSAxID8gXCJcIiA6IFwic1wifSBtYXRjaGluZyBcIiR7cXVlcnl9XCIuIFRvcCBtYXRjaDogXCIke2xpbWl0ZWRbMF0udGl0bGV9XCIgKCR7bGltaXRlZFswXS5jYXRlZ29yeX0pLmBcbiAgICAgICAgOiBgTm8gcGF0dGVybnMgZm91bmQgZm9yIFwiJHtxdWVyeX1cIi5gO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgdG90YWwsXG4gICAgICByZXN1bHRzOiBsaW1pdGVkLFxuICAgICAgc3VtbWFyeSxcbiAgICAgIHJlY29tbWVuZGF0aW9uczogbGltaXRlZC5tYXAoKHBhdHRlcm4pID0+ICh7XG4gICAgICAgIGlkOiBwYXR0ZXJuLmlkLFxuICAgICAgICB0aXRsZTogcGF0dGVybi50aXRsZSxcbiAgICAgICAgd2h5OiBwYXR0ZXJuLmRlc2NyaXB0aW9uLFxuICAgICAgfSkpLFxuICAgIH07XG4gIH0sXG59KTtcblxuLyoqXG4gKiByZXZpZXdDb2RlU25pcHBldCBUb29sXG4gKiBBbGxvd3MgdGhlIEFJIHRvIHJldmlldyBFZmZlY3QgY29kZSBhbmQgc3VnZ2VzdCBpbXByb3ZlbWVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IHJldmlld0NvZGVTbmlwcGV0VG9vbCA9IHRvb2woe1xuICBkZXNjcmlwdGlvbjogYFJldmlldyBhbiBFZmZlY3QtVFMgY29kZSBzbmlwcGV0IGFuZCBzdWdnZXN0IGltcHJvdmVtZW50cy5cbiAgICBVc2UgdGhpcyB3aGVuIHRoZSB1c2VyIHBhc3RlcyBjb2RlIGFuZCBhc2tzIGZvciByZXZpZXcsIHJlZmFjdG9yaW5nIHN1Z2dlc3Rpb25zLFxuICAgIG9yIHdhbnRzIHRvIGtub3cgaWYgdGhleSdyZSBmb2xsb3dpbmcgYmVzdCBwcmFjdGljZXMuXG4gICAgUmV0dXJucyBhbmFseXNpcywgc3VnZ2VzdGlvbnMsIGFuZCBvcHRpb25hbGx5IGEgZGlmZiBzaG93aW5nIHRoZSBpbXByb3ZlZCBjb2RlLmAsXG5cbiAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgIGNvZGU6IHouc3RyaW5nKCkuZGVzY3JpYmUoXCJUaGUgRWZmZWN0LVRTIGNvZGUgc25pcHBldCB0byByZXZpZXdcIiksXG4gIH0pLFxuXG4gIGV4ZWN1dGU6IGFzeW5jICh7IGNvZGUgfSkgPT4ge1xuICAgIC8vIEltcG9ydCBNY3BDbGllbnQgZHluYW1pY2FsbHkgdG8gdXNlIGluIEVmZmVjdCBjb250ZXh0XG4gICAgY29uc3QgeyBNY3BDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIi4vc2VydmljZXMvbWNwLWNsaWVudFwiKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBydW5FZmZlY3QoXG4gICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICBjb25zdCBjbGllbnQgPSB5aWVsZCogTWNwQ2xpZW50O1xuICAgICAgICAgIHJldHVybiB5aWVsZCogY2xpZW50LnJldmlld0NvZGUoY29kZSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhbmFseXNpczogcmVzdWx0LmFuYWx5c2lzLFxuICAgICAgICBzdWdnZXN0aW9uOiByZXN1bHQuc3VnZ2VzdGlvbixcbiAgICAgICAgZGlmZjogcmVzdWx0LmRpZmYsXG4gICAgICAgIHJldmlld2VkOiB0cnVlLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gSWYgTUNQIHNlcnZlciBpcyBub3QgYXZhaWxhYmxlLCBwcm92aWRlIGJhc2ljIGZlZWRiYWNrXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhbmFseXNpczogXCJNQ1Agc2VydmVyIGlzIG5vdCBhdmFpbGFibGUgZm9yIGRldGFpbGVkIGNvZGUgcmV2aWV3LlwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlBsZWFzZSBlbnN1cmUgdGhlIE1DUCBzZXJ2ZXIgaXMgcnVubmluZyBhdCBcIiArIChwcm9jZXNzLmVudi5NQ1BfU0VSVkVSX1VSTCB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiKSxcbiAgICAgICAgZGlmZjogXCJcIixcbiAgICAgICAgcmV2aWV3ZWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgIH07XG4gICAgfVxuICB9LFxufSk7XG5cbi8qKlxuICogRXhwb3J0IGFsbCB0b29scyBhcyBhIHNpbmdsZSBvYmplY3QgZm9yIHRoZSBBSSBTREtcbiAqL1xuZXhwb3J0IGNvbnN0IHRvb2xzID0ge1xuICBzZWFyY2hQYXR0ZXJuczogc2VhcmNoUGF0dGVybnNUb29sLFxuICByZXZpZXdDb2RlU25pcHBldDogcmV2aWV3Q29kZVNuaXBwZXRUb29sLFxufTtcbiJdLCJuYW1lcyI6WyJ0b29sIiwieiIsIkVmZmVjdCIsInJ1bkVmZmVjdCIsIm1vY2tQYXR0ZXJucyIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiZGlmZmljdWx0eSIsInRhZ3MiLCJrZXl3b3JkcyIsInNlYXJjaFBhdHRlcm5zVG9vbCIsInBhcmFtZXRlcnMiLCJvYmplY3QiLCJxdWVyeSIsInN0cmluZyIsImRlc2NyaWJlIiwib3B0aW9uYWwiLCJsaW1pdCIsIm51bWJlciIsImV4ZWN1dGUiLCJub3JtYWxpemVkUXVlcnkiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJtYXRjaGVzIiwiZmlsdGVyIiwicGF0dGVybiIsImxlbmd0aCIsImluS2V5d29yZHMiLCJzb21lIiwia2V5d29yZCIsImluY2x1ZGVzIiwiaW5UYWdzIiwidGFnIiwiZmlsdGVyZWQiLCJsaW1pdGVkIiwic2xpY2UiLCJ0b3RhbCIsInN1bW1hcnkiLCJyZXN1bHRzIiwicmVjb21tZW5kYXRpb25zIiwibWFwIiwid2h5IiwicmV2aWV3Q29kZVNuaXBwZXRUb29sIiwiY29kZSIsIk1jcENsaWVudCIsInJlc3VsdCIsImdlbiIsImNsaWVudCIsInJldmlld0NvZGUiLCJhbmFseXNpcyIsInN1Z2dlc3Rpb24iLCJkaWZmIiwicmV2aWV3ZWQiLCJlcnJvciIsInByb2Nlc3MiLCJlbnYiLCJNQ1BfU0VSVkVSX1VSTCIsIkVycm9yIiwibWVzc2FnZSIsInRvb2xzIiwic2VhcmNoUGF0dGVybnMiLCJyZXZpZXdDb2RlU25pcHBldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/server/tools.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_paul_Projects_Effect_Patterns_app_chat_assistant_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/Users/paul/Projects/Effect-Patterns/app/chat-assistant/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_paul_Projects_Effect_Patterns_app_chat_assistant_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBhdWwlMkZQcm9qZWN0cyUyRkVmZmVjdC1QYXR0ZXJucyUyRmFwcCUyRmNoYXQtYXNzaXN0YW50JTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnBhdWwlMkZQcm9qZWN0cyUyRkVmZmVjdC1QYXR0ZXJucyUyRmFwcCUyRmNoYXQtYXNzaXN0YW50JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUM2QjtBQUMxRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3BhdWwvUHJvamVjdHMvRWZmZWN0LVBhdHRlcm5zL2FwcC9jaGF0LWFzc2lzdGFudC9hcHAvYXBpL2NoYXQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3BhdWwvUHJvamVjdHMvRWZmZWN0LVBhdHRlcm5zL2FwcC9jaGF0LWFzc2lzdGFudC9hcHAvYXBpL2NoYXQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/zod","vendor-chunks/@ai-sdk","vendor-chunks/ai","vendor-chunks/zod-to-json-schema","vendor-chunks/secure-json-parse","vendor-chunks/nanoid","vendor-chunks/effect"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaul%2FProjects%2FEffect-Patterns%2Fapp%2Fchat-assistant&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();