---
title: "Write Sequential Code with Effect.gen"
id: "write-sequential-code-with-gen"
skillLevel: "beginner"
useCase: ["Core Concepts"]
summary: "Use Effect.gen with yield* to write sequential, asynchronous code in a style that looks and feels like familiar async/await."
tags: ["generators", "gen", "sequential", "async-await", "readability"]
rule:
  description: "Write sequential code with Effect.gen."
related: ["transform-effect-values", "use-gen-for-business-logic"]
author: "Paul Philp"
---

# Write Sequential Code with Effect.gen

## Guideline

For sequential operations that depend on each other, use `Effect.gen` to write
your logic in a familiar, imperative style. It's the Effect-native equivalent
of `async/await`.

## Rationale

`Effect.gen` uses generator functions to create a flat, linear, and highly
readable sequence of operations, avoiding the nested "callback hell" of
`flatMap`.

## Good Example

```typescript
import { Effect } from "effect";

const getPostsWithGen = Effect.gen(function* () {
  const response = yield* Effect.tryPromise(() => fetch("..."));
  const user = yield* Effect.tryPromise(() => response.json() as Promise<any>);
  // ... more steps
  return user;
});
```

**Explanation:**  
`Effect.gen` allows you to write top-to-bottom code that is easy to read and
maintain, even when chaining many asynchronous steps.

## Anti-Pattern

Deeply nesting `flatMap` calls. This is much harder to read and maintain than
the equivalent `Effect.gen` block.
